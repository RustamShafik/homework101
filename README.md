# Домашняя работа по уроку 13.1 "Библиотеки csv и pandas"

## Описание

Проект содержит функции для обработки и форматирования данных: 
- get_mask_card_number
- get_mask_account
- mask_account_card
- filter_by_state
- get_date
- sort_by_date
- **Модуль с функциями для фильтрации и генерации данных:**
  - filter_by_currency
  - transaction_descriptions
  - card_number_generator
- **Модуль с функцией, которая принимает на вход путь до JSON-файла и возвращает список словарей с данными о финансовых транзакциях:**
  - transactions_dict_return
- **Модуль с функцией, которая которая принимает на вход транзакцию и возвращает сумму транзакции (
amount
) в рублях**
  - convert_op
- **Логгеры для ведения логов в модулях masks и util**
- **Модуль с функциями, которые принимают файлы CSV и Excel и возвращают список словарей с транзакциями** 

### Основные функции

1. **get_mask_card_number(card_number)**  
   Маскирует номер карты, оставляя первые 4 и последние 4 цифры, а остальное заменяет на `*`.  
   Пример:  
   - Вход: `"7000792289606361"`  
   - Выход: `"7000 79** **** 6361"`

2. **get_mask_account(account)**  
   Маскирует номер счета, оставляя только последние 4 цифры, а остальное заменяет на `*`.  
   Пример:  
   - Вход: `"73654108430135874305"`  
   - Выход: `"**4305"`

3. **mask_account_card(data)**  
   Определяет тип данных (номер счета или номер карты) и вызывает соответствующую функцию для маскирования.  
   Пример:  
   - Вход: `"Visa Platinum 7000792289606361"`  
   - Выход: `"Visa **** **** 6361"`

4. **get_date(date)**  
   Преобразует строку с датой из формата ISO в формат `дд.мм.гггг`.  
   Пример:  
   - Вход: `"2024-03-11T02:26:18.671407"`  
   - Выход: `"11.03.2024"`

5. **filter_by_state(dict_list, state="EXECUTED")**  
   Фильтрует список словарей по значению ключа `state`. Если параметр `state` не указан, фильтрует по состоянию `"EXECUTED"`.  
   Пример:  
   - Вход:  
     ```python
     [
         {"id": 1, "state": "EXECUTED", "date": "2023-12-01T10:00:00"},
         {"id": 2, "state": "PENDING", "date": "2023-12-02T10:00:00"}
     ]
     ```  
   - Выход:  
     ```python
     [{"id": 1, "state": "EXECUTED", "date": "2023-12-01T10:00:00"}]
     ```

6. **sort_by_date(dict_list, order=True)**  
   Сортирует список словарей по ключу `date`. По умолчанию сортировка выполняется в порядке убывания.  
   Пример:  
   - Вход:  
     ```python
     [
         {"id": 1, "date": "2023-12-01T10:00:00"},
         {"id": 2, "date": "2023-12-03T10:00:00"}
     ]
     ```  
   - Выход:  
     ```python
     [
         {"id": 2, "date": "2023-12-03T10:00:00"},
         {"id": 1, "date": "2023-12-01T10:00:00"}
     ]
     ```

---

### Новый модуль: Генерация и фильтрация данных

1. **filter_by_currency(transactions, currency)**  
   Фильтрует список транзакций по валюте. Возвращает только те транзакции, где валюта соответствует заданной.  
   Пример:  
   - Вход:  
     ```python
     transactions = [
         {"operationAmount": {"currency": {"name": "USD"}}},
         {"operationAmount": {"currency": {"name": "EUR"}}},
         {"operationAmount": {"currency": {"name": "USD"}}}
     ]
     ```  
   - Выход:  
     ```python
     [{"operationAmount": {"currency": {"name": "USD"}}}, {"operationAmount": {"currency": {"name": "USD"}}}]
     ```

2. **transaction_descriptions(transactions)**  
   Извлекает описания всех транзакций. Возвращает список строк с описанием каждой транзакции.  
   Пример:  
   - Вход:  
     ```python
     transactions = [
         {"description": "Перевод организации"},
         {"description": "Перевод со счета на счет"}
     ]
     ```  
   - Выход:  
     ```python
     ["Перевод организации", "Перевод со счета на счет"]
     ```

3. **card_number_generator(start, finish)**  
   Генерирует номера карт с разделением на 4 цифры. Генератор возвращает форматированные номера карт в виде строки.  
   Пример:  
   - Вход: `(1, 3)`  
   - Выход:  
     ```python
     ["0000 0000 0000 0001", "0000 0000 0000 0002", "0000 0000 0000 0003"]
     ```

### Новый модуль: Декораторы

#### **Декоратор `log`**

Декоратор `log` позволяет автоматически логировать начало и конец выполнения функции, а также её результат или возникшие ошибки. Логи могут записываться как в файл, так и выводиться в консоль.

- **Параметры**:
  - `filename` (по умолчанию `None`): Если указан, логи записываются в файл с заданным именем. Если не указан, вывод производится в консоль.
  
- **Пример использования**:

```python
from src.decorators import log

@log(filename="log.txt")
def divide(a, b):
    return a / b

@log()
def multiply(a, b):
    return a * b

# Успешный вызов
result = multiply(4, 5)  # Вывод: multiply ok

---

## Зависимости

Этот проект использует Poetry для управления зависимостями и виртуальным окружением.

Зайдите на сайт https://python-poetry.org/ и перейдите в раздел Documentation → Introduction → Installation → With the official installer.
В разделе Install Poetry скопируйте команду 
```bash
curl -sSL https://install.python-poetry.org | python -
